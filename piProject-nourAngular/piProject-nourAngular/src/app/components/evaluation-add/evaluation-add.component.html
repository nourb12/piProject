<app-headerback></app-headerback>
<app-sideback></app-sideback>

<div id="page-wrapper">
  <div class="container-fluid">
    <div class="row bg-title">
      <div class="col-lg-6 col-md-8 col-sm-10 col-xs-12">
        <h2>Add Evaluation</h2>

        <form (ngSubmit)="addEvaluation()" class="evaluation-form">
          
          <!-- Overall Rating -->
          <div class="form-group">
            <label for="noteGlobale">Overall Rating:</label>
            <div class="rating">
              <mat-icon *ngFor="let star of [1, 2, 3, 4, 5]" 
                        (click)="setRating('noteGlobale', star)">
                {{ getStarIcon('noteGlobale', star) }}
              </mat-icon>
            </div>
          </div>

          <!-- Supervision Quality -->
          <div class="form-group">
            <label for="qualiteEncadrement">Supervision Quality:</label>
            <div class="rating">
              <mat-icon *ngFor="let star of [1, 2, 3, 4, 5]" 
                        (click)="setRating('qualiteEncadrement', star)">
                {{ getStarIcon('qualiteEncadrement', star) }}
              </mat-icon>
            </div>
          </div>

          <!-- Work Environment -->
          <div class="form-group">
            <label for="ambianceTravail">Work Environment:</label>
            <div class="rating">
              <mat-icon *ngFor="let star of [1, 2, 3, 4, 5]" 
                        (click)="setRating('ambianceTravail', star)">
                {{ getStarIcon('ambianceTravail', star) }}
              </mat-icon>
            </div>
          </div>

          <!-- Workload -->
          <div class="form-group">
            <label for="chargeTravail">Workload:</label>
            <select id="chargeTravail" [(ngModel)]="evaluation.chargeTravail" name="chargeTravail" required>
              <option value="" disabled selected>Select a workload</option>
              <option value="good">Good</option>
              <option value="medium">Medium</option>
              <option value="bad">Bad</option>
            </select>
          </div>

          <!-- Comment -->
          <div class="form-group">
            <label for="commentaire">Comment:</label>
            <textarea id="commentaire" [(ngModel)]="evaluation.commentaire" name="commentaire" 
              (input)="checkBadWords()" required></textarea>
            <p *ngIf="hasBadWords" class="text-danger">
              Your comment contains forbidden words! Please modify it.
            </p>
          </div>

          <!-- Details -->
          <div class="form-group">
            <label for="detail">Details:</label>
            <textarea id="detail" [(ngModel)]="evaluation.detail" name="detail" required></textarea>
          </div>

          <!-- Button disabled if bad words are detected -->
          <button type="submit" class="btn btn-primary" [disabled]="hasBadWords">Add Evaluation</button>
        </form>
      </div>
    </div>
  </div>
</div>
