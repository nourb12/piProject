<app-headerback></app-headerback>
<app-sideback></app-sideback>

<div id="page-wrapper">
  <div class="container-fluid">
    <div class="row bg-title">
      <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
        <h4 class="page-title">Project Management</h4>
      </div>
    </div>
    <app-notification-icon></app-notification-icon>
    <h2 class="text-center mb-4">List of Projects</h2>

    <div class="row justify-content-center">
      <div class="col-md-10">
        <div class="card shadow p-4">
          <table class="table table-striped table-hover table-bordered shadow">
            <thead class="table-dark">
              <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Description</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Status</th>
                <th>Progress</th>
                <th class="text-center">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let project of projects">
                <td>{{ project.id }}</td>
                <td>{{ project.title }}</td>
                <td>{{ project.description }}</td>
                <td>{{ project.startDate }}</td>
                <td>{{ project.endDate }}</td>
                <td>
                  <span class="badge" [ngClass]="{
                    'bg-warning text-dark': project.status === 'PLANNED',
                    'bg-primary': project.status === 'IN_PROGRESS',
                    'bg-success': project.status === 'COMPLETED'
                  }">
                    {{ project.status }}
                  </span>
                </td>
                <td>
                  <div class="progress-container">
                    <div class="progress" 
                         style="height: 10px; width: 100px; background-color: #ffffff; border-radius: 5px; border: 2px solid #3d3d3d;">
                      <div class="progress-bar" 
                           role="progressbar" 
                           [style.width.%]="project.progress" 
                           [attr.aria-valuenow]="project.progress" 
                           aria-valuemin="0" 
                           aria-valuemax="100"
                           style="background-color: #28a745; height: 100%; border-radius: 5px;">
                      </div>
                    </div>
                    <small class="d-block text-center">{{ project.progress | number: '1.0-2' }}%</small>
                  </div>
                </td>
                
                <!-- ‚úÖ Boutons stylis√©s -->
                <td class="text-center">
                  <button [routerLink]="['/update-project', project.id]" class="btn btn-outline-warning btn-sm">
                    ‚úè Edit
                  </button>
                  <button (click)="viewTasks(project.id)" class="btn btn-outline-info btn-sm">
                    üìã Tasks
                  </button>
                  <button class="btn btn-outline-success btn-sm" [routerLink]="['/create-task', project.id]">
                    ‚ûï Add Task
                  </button>
                  <button (click)="deleteProject(project.id)" class="btn btn-outline-danger btn-sm">
                    üóë Delete
                  </button>
                </td>
              </tr>
            </tbody>
          </table>


          <div class="d-flex justify-content-end mt-3">
            <button routerLink="/create-project" class="btn btn-primary btn-sm shadow-sm" style="font-size: 1.2rem; padding: 0.8rem 1rem;">
              ‚ûï Create Project
            </button>
            <button routerLink="/archived-projects" class="btn btn-secondary btn-sm shadow-sm" style="font-size: 1.2rem; padding: 0.8rem 1rem;">
              View Archived Project
            </button>
          </div>
          
          
          <app-project-statistics></app-project-statistics>
          <h2 class="text-center mt-5">Project Timeline</h2>
          <app-project-timeline></app-project-timeline>
        </div>
      </div>
    </div>
  </div>
</div>
<app-footerback></app-footerback>